<!DOCTYPE html>
<html lang="sv">
<head>
    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F√∂rskolor N√§ra Mig - S√∂k, J√§mf√∂r & Hitta Alla F√∂rskolor i Sverige | Sveriges St√∂rsta F√∂rskoldatabas</title>
    <meta name="description" content="Hitta och j√§mf√∂r f√∂rskolor n√§ra dig! S√∂k bland alla f√∂rskolor i Sverige med interaktiv karta, detaljerad statistik och j√§mf√∂relseverktyg. Kommunala och enskilda f√∂rskolor.">
    <meta name="keywords" content="f√∂rskolor n√§ra mig, alla f√∂rskolor, j√§mf√∂ra f√∂rskolor, f√∂rskolor sverige, f√∂rskolor stockholm, f√∂rskolor g√∂teborg, f√∂rskolor malm√∂, kommunala f√∂rskolor, enskilda f√∂rskolor, f√∂rskola karta, f√∂rskolor s√∂kning">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="F√∂rskolor N√§ra Mig - S√∂k, J√§mf√∂r & Hitta Alla F√∂rskolor i Sverige">
    <meta property="og:description" content="Hitta och j√§mf√∂r f√∂rskolor n√§ra dig! S√∂k bland alla f√∂rskolor i Sverige med interaktiv karta, detaljerad statistik och j√§mf√∂relseverktyg.">
    <meta property="og:url" content="https://allaf√∂rskolor.se">
    <meta property="og:site_name" content="Sveriges F√∂rskolor">
    <meta property="og:locale" content="sv_SE">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://allaf√∂rskolor.se">
    
    <!-- External Libraries -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- MODULAR CSS FILES -->
    <link rel="stylesheet" href="./modules/01-core/01-base.css">
    <link rel="stylesheet" href="./modules/01-core/02-layout.css">
    <link rel="stylesheet" href="./modules/02-search/01-search.css">
    <link rel="stylesheet" href="./modules/03-map/01-map.css">
    <link rel="stylesheet" href="./modules/04-sidebar/01-sidebar.css">
    <link rel="stylesheet" href="./modules/05-comparison/01-comparison.css">
    <link rel="stylesheet" href="./modules/06-statistics/01-statistics.css">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@graph": [
            {
                "@type": "WebSite",
                "@id": "https://allaf√∂rskolor.se/#website",
                "url": "https://allaf√∂rskolor.se",
                "name": "Sveriges F√∂rskolor",
                "description": "Hitta och j√§mf√∂r f√∂rskolor n√§ra dig! S√∂k bland alla f√∂rskolor i Sverige med interaktiv karta.",
                "inLanguage": "sv-SE"
            }
        ]
    }
    </script>
</head>
<body>
    <main role="main">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-content">
                <div class="view-switcher">
                    <button class="view-btn active" onclick="showMapView()">üó∫Ô∏è Kartvy</button>
                    <button class="view-btn" onclick="openStatsModal()">üìä Statistik</button>
                </div>
            </div>
        </div>

        <!-- App Container -->
        <div class="app-container">
            <!-- Search Panel -->
            <div class="sidebar">
                <div class="search-panel" id="searchPanel">
                    <div class="search-input-container">
                        <div class="autocomplete-container">
                            <input type="text" id="searchInput" class="search-input" 
                                   placeholder="s√∂k h√§r" autocomplete="off">
                            <div id="autocompleteSuggestions" class="autocomplete-suggestions" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Filter Controls -->
                    <div class="filter-controls">
                        <button class="quick-filter" onclick="toggleFilter('huvudman', 'kommunal')">Kommunal</button>
                        <button class="quick-filter" onclick="toggleFilter('huvudman', 'enskild')">Enskild</button>
                        <button class="quick-filter" onclick="clearAllFilters()">Rensa filter</button>
                    </div>

                    <!-- Size Filter -->
                    <div class="size-filter">
                        <label class="size-filter-label">Max antal barn:</label>
                        <div class="size-slider-container">
                            <input type="range" id="sizeSlider" class="size-slider" 
                                   min="10" max="200" value="200" oninput="updateSizeFilter(this.value)">
                            <div class="size-value" id="sizeValue">200+ barn</div>
                        </div>
                    </div>
                </div>

                <!-- Schools Sidebar -->
                <div class="map-schools-sidebar" id="mapSchoolsSidebar">
                    <div class="sidebar-header">
                        <div class="sidebar-header-row">
                            <div class="sidebar-count" id="sidebarCount">0</div>
                        </div>
                        <div class="sidebar-stats">
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-value" id="sidebarVisibleCount">-</span>
                                <div class="sidebar-stat-label">Synliga</div>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-value" id="sidebarKommunalCount">-</span>
                                <div class="sidebar-stat-label">Kommunala</div>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-value" id="sidebarEnskildCount">-</span>
                                <div class="sidebar-stat-label">Enskilda</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="schools-list-container">
                        <div class="schools-list" id="schoolsList">
                            <!-- School items will be populated here -->
                        </div>
                    </div>
                    
                    <div class="pagination-controls">
                        <button class="pagination-btn" id="prevPageBtn" onclick="previousPage()" disabled>F√∂reg√•ende</button>
                        <span class="pagination-info" id="paginationInfo">-</span>
                        <button class="pagination-btn" id="nextPageBtn" onclick="nextPage()">N√§sta</button>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <div class="map-container">
                    <div id="map"></div>
                    <div class="location-status" id="locationStatus"></div>
                </div>
            </div>
        </div>

        <!-- Floating Compare Button -->
        <button class="floating-compare-btn" id="floatingCompareBtn" onclick="openCompareView()">
            <span>‚öñÔ∏è J√§mf√∂r f√∂rskolor</span>
            <span class="compare-count" id="floatingCompareCount">0</span>
        </button>

        <!-- Statistics Modal -->
        <div class="statistics-lightbox" id="statisticsLightbox">
            <div class="statistics-modal">
                <div class="statistics-header">
                    <h2 class="statistics-title">
                        <span>üìä Statistik och Analys</span>
                        <button class="close-btn" onclick="closeStatsModal()">√ó</button>
                    </h2>
                </div>
                <div class="statistics-content" id="statisticsContent">
                    <div class="statistics-loading" id="statisticsLoading">
                        <div class="loading-spinner"></div>
                        <p>Laddar statistik...</p>
                    </div>
                    <div id="statisticsData" style="display: none;">
                        <!-- Statistics content will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Comparison Modal -->
        <div class="comparison-lightbox" id="comparisonLightbox">
            <div class="comparison-modal">
                <div class="modal-header">
                    <h2 class="modal-title">
                        <span>‚öñÔ∏è J√§mf√∂r f√∂rskolor</span>
                        <button class="close-btn" onclick="closeComparisonModal()">√ó</button>
                    </h2>
                </div>
                <div class="modal-content" id="comparisonContent">
                    <!-- Comparison content will be populated here -->
                </div>
            </div>
        </div>
    </main>

    <!-- MODULAR JAVASCRIPT FILES -->
    <script src="./config.js"></script>
    <script src="./data.js"></script>
    <script src="./modules/01-core/03-variables.js"></script>
    <script src="./modules/02-search/02-search.js"></script>
    <script src="./modules/02-search/03-autocomplete.js"></script>
    
    <!-- Add remaining JavaScript functionality here -->
    <!-- Note: The full JS extraction would be done in separate files -->
    <script>
        // Minimal initialization script - full functionality would be in separate modules
        window.addEventListener('load', function() {
            console.log('Modular Sveriges F√∂rskolor loaded successfully!');
        });
    </script>

</body>
</html>